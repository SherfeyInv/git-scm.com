---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-worktree Documentation
docname: git-worktree
version: 2.6.7
aliases:
- "/docs/git-worktree/2.6.7/index.html"
---
<div class="sect1">
<h2 id="_name"><a class="anchor" href="#_name"></a>NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-worktree - Manage multiple working trees</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git worktree add</em> [-f] [--detach] [-b &lt;new-branch&gt;] &lt;path&gt; [&lt;branch&gt;]
<em>git worktree prune</em> [-n] [-v] [--expire &lt;expire&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Manage multiple working trees attached to the same repository.</p>
</div>
<div class="paragraph">
<p>A git repository can support multiple working trees, allowing you to check
out more than one branch at a time.  With <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code></span> a new working
tree is associated with the repository.  This new working tree is called a
"linked working tree" as opposed to the "main working tree" prepared by "git
init" or "git clone".  A repository has one main working tree (if it&#8217;s not a
bare repository) and zero or more linked working trees.</p>
</div>
<div class="paragraph">
<p>When you are done with a linked working tree you can simply delete it.
The working tree&#8217;s administrative files in the repository (see
"DETAILS" below) will eventually be removed automatically (see
<span class='synopsis'><code>gc.worktreePruneExpire</code></span> in <a href='{{< relurl "docs/git-config" >}}'>git-config[1]</a>), or you can run
<span class='synopsis'><code>git</code> <code>worktree</code> <code>prune</code></span> in the main or any linked working tree to
clean up any stale administrative files.</p>
</div>
<div class="paragraph">
<p>If you move a linked working tree to another file system, or
within a file system that does not support hard links, you need to run
at least one git command inside the linked working tree
(e.g. <span class='synopsis'><code>git</code> <code>status</code></span>) in order to update its administrative files in the
repository so that they do not get automatically pruned.</p>
</div>
<div class="paragraph">
<p>If a linked working tree is stored on a portable device or network share
which is not always mounted, you can prevent its administrative files from
being pruned by creating a file named <em>locked</em> alongside the other
administrative files, optionally containing a plain text reason that
pruning should be suppressed. See section "DETAILS" for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commands"><a class="anchor" href="#_commands"></a>COMMANDS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-worktree.txt-addltpathgtltbranchgt"><a id="Documentation/git-worktree.txt-addpathbranch" class="anchor" href="#Documentation/git-worktree.txt-addpathbranch"></a>add &lt;path&gt; [&lt;branch&gt;] </dt>
<dd>
<p>Create <span class='synopsis'><em>&lt;path&gt;</em></span> and checkout <span class='synopsis'><em>&lt;branch&gt;</em></span> into it. The new working directory
is linked to the current repository, sharing everything except working
directory specific files such as HEAD, index, etc.</p>
<div class="paragraph">
<p>If <span class='synopsis'><em>&lt;branch&gt;</em></span> is omitted and neither <span class='synopsis'><code>-b</code></span> nor <span class='synopsis'><code>-B</code></span> nor <span class='synopsis'><code>--detached</code></span> used,
then, as a convenience, a new branch based at HEAD is created automatically,
as if <span class='synopsis'><code>-b</code> <code>$</code>(<code>basename</code> <em>&lt;path&gt;</em>)</span> was specified.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-prune"><a class="anchor" href="#Documentation/git-worktree.txt-prune"></a>prune </dt>
<dd>
<p>Prune working tree information in $GIT_DIR/worktrees.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options"><a class="anchor" href="#_options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-worktree.txt--f"><a class="anchor" href="#Documentation/git-worktree.txt--f"></a>-f </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---force"><a class="anchor" href="#Documentation/git-worktree.txt---force"></a>--force </dt>
<dd>
<p>By default, <span class='synopsis'><code>add</code></span> refuses to create a new working tree when <span class='synopsis'><em>&lt;branch&gt;</em></span>
is already checked out by another working tree. This option overrides
that safeguard.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--bltnew-branchgt"><a id="Documentation/git-worktree.txt--bnew-branch" class="anchor" href="#Documentation/git-worktree.txt--bnew-branch"></a>-b &lt;new-branch&gt; </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt--Bltnew-branchgt"><a id="Documentation/git-worktree.txt--Bnew-branch" class="anchor" href="#Documentation/git-worktree.txt--Bnew-branch"></a>-B &lt;new-branch&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>add</code></span>, create a new branch named <span class='synopsis'><em>&lt;new-branch&gt;</em></span> starting at
<span class='synopsis'><em>&lt;branch&gt;</em></span>, and check out <span class='synopsis'><em>&lt;new-branch&gt;</em></span> into the new working tree.
If <span class='synopsis'><em>&lt;branch&gt;</em></span> is omitted, it defaults to HEAD.
By default, <span class='synopsis'><code>-b</code></span> refuses to create a new branch if it already
exists. <span class='synopsis'><code>-B</code></span> overrides this safeguard, resetting <span class='synopsis'><em>&lt;new-branch&gt;</em></span> to
<span class='synopsis'><em>&lt;branch&gt;</em></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---detach"><a class="anchor" href="#Documentation/git-worktree.txt---detach"></a>--detach </dt>
<dd>
<p>With <span class='synopsis'><code>add</code></span>, detach HEAD in the new working tree. See "DETACHED HEAD"
in <a href='{{< relurl "docs/git-checkout" >}}'>git-checkout[1]</a>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--n"><a class="anchor" href="#Documentation/git-worktree.txt--n"></a>-n </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---dry-run"><a class="anchor" href="#Documentation/git-worktree.txt---dry-run"></a>--dry-run </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, do not remove anything; just report what it would
remove.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--v"><a class="anchor" href="#Documentation/git-worktree.txt--v"></a>-v </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---verbose"><a class="anchor" href="#Documentation/git-worktree.txt---verbose"></a>--verbose </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, report all removals.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---expirelttimegt"><a id="Documentation/git-worktree.txt---expiretime" class="anchor" href="#Documentation/git-worktree.txt---expiretime"></a>--expire &lt;time&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, only expire unused working trees older than &lt;time&gt;.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_details"><a class="anchor" href="#_details"></a>DETAILS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each linked working tree has a private sub-directory in the repository&#8217;s
$GIT_DIR/worktrees directory.  The private sub-directory&#8217;s name is usually
the base name of the linked working tree&#8217;s path, possibly appended with a
number to make it unique.  For example, when <span class='synopsis'><code>$GIT_DIR=/path/main/.git</code></span> the
command <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code> <code>/path/other/test-next</code> <code>next</code></span> creates the linked
working tree in <span class='synopsis'><code>/path/other/test-next</code></span> and also creates a
<span class='synopsis'><code>$GIT_DIR/worktrees/test-next</code></span> directory (or <span class='synopsis'><code>$GIT_DIR/worktrees/test-next1</code></span>
if <span class='synopsis'><code>test-next</code></span> is already taken).</p>
</div>
<div class="paragraph">
<p>Within a linked working tree, $GIT_DIR is set to point to this private
directory (e.g. <span class='synopsis'><code>/path/main/.git/worktrees/test-next</code></span> in the example) and
$GIT_COMMON_DIR is set to point back to the main working tree&#8217;s $GIT_DIR
(e.g. <span class='synopsis'><code>/path/main/.git</code></span>). These settings are made in a <span class='synopsis'><code>.git</code></span> file located at
the top directory of the linked working tree.</p>
</div>
<div class="paragraph">
<p>Path resolution via <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code></span> uses either
$GIT_DIR or $GIT_COMMON_DIR depending on the path. For example, in the
linked working tree <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code> <code>HEAD</code></span> returns
<span class='synopsis'><code>/path/main/.git/worktrees/test-next/HEAD</code></span> (not
<span class='synopsis'><code>/path/other/test-next/.git/HEAD</code></span> or <span class='synopsis'><code>/path/main/.git/HEAD</code></span>) while <span class='synopsis'><code>git</code>

<code>rev-parse</code> <code>--git-path</code> <code>refs/heads/master</code></span> uses
$GIT_COMMON_DIR and returns <span class='synopsis'><code>/path/main/.git/refs/heads/master</code></span>,
since refs are shared across all working trees.</p>
</div>
<div class="paragraph">
<p>See <a href='{{< relurl "docs/gitrepository-layout" >}}'>gitrepository-layout[5]</a> for more information. The rule of
thumb is do not make any assumption about whether a path belongs to
$GIT_DIR or $GIT_COMMON_DIR when you need to directly access something
inside $GIT_DIR. Use <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code></span> to get the final path.</p>
</div>
<div class="paragraph">
<p>To prevent a $GIT_DIR/worktrees entry from being pruned (which
can be useful in some situations, such as when the
entry&#8217;s working tree is stored on a portable device), add a file named
<em>locked</em> to the entry&#8217;s directory. The file contains the reason in
plain text. For example, if a linked working tree&#8217;s <span class='synopsis'><code>.git</code></span> file points
to <span class='synopsis'><code>/path/main/.git/worktrees/test-next</code></span> then a file named
<span class='synopsis'><code>/path/main/.git/worktrees/test-next/locked</code></span> will prevent the
<span class='synopsis'><code>test-next</code></span> entry from being pruned.  See
<a href='{{< relurl "docs/gitrepository-layout" >}}'>gitrepository-layout[5]</a> for details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You are in the middle of a refactoring session and your boss comes in and
demands that you fix something immediately. You might typically use
<a href='{{< relurl "docs/git-stash" >}}'>git-stash[1]</a> to store your changes away temporarily, however, your
working tree is in such a state of disarray (with new, moved, and removed
files, and other bits and pieces strewn around) that you don&#8217;t want to risk
disturbing any of it. Instead, you create a temporary linked working tree to
make the emergency fix, remove it when done, and then resume your earlier
refactoring session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git worktree add -b emergency-fix ../temp master
$ pushd ../temp
# ... hack hack hack ...
$ git commit -a -m 'emergency fix for boss'
$ popd
$ rm -rf ../temp
$ git worktree prune</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs"><a class="anchor" href="#_bugs"></a>BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multiple checkout in general is still experimental, and the support
for submodules is incomplete. It is NOT recommended to make multiple
checkouts of a superproject.</p>
</div>
<div class="paragraph">
<p>git-worktree could provide more automation for tasks currently
performed manually, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class='synopsis'><code>remove</code></span> to remove a linked working tree and its administrative files (and
warn if the working tree is dirty)</p>
</li>
<li>
<p><span class='synopsis'><code>mv</code></span> to move or rename a working tree and update its administrative files</p>
</li>
<li>
<p><span class='synopsis'><code>list</code></span> to list linked working trees</p>
</li>
<li>
<p><span class='synopsis'><code>lock</code></span> to prevent automatic pruning of administrative files (for instance,
for a working tree on a portable device)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href='{{< relurl "docs/git" >}}'>git[1]</a> suite</p>
</div>
</div>
</div>