---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-worktree Documentation
docname: git-worktree
version: 2.30.0
aliases:
- "/docs/git-worktree/2.30.0/index.html"
- "/docs/git-worktree/2.30.1/index.html"
- "/docs/git-worktree/2.30.2/index.html"
- "/docs/git-worktree/2.30.3/index.html"
- "/docs/git-worktree/2.30.4/index.html"
- "/docs/git-worktree/2.30.5/index.html"
- "/docs/git-worktree/2.30.6/index.html"
- "/docs/git-worktree/2.30.7/index.html"
- "/docs/git-worktree/2.30.8/index.html"
- "/docs/git-worktree/2.30.9/index.html"
---
<div class="sect1">
<h2 id="_name"><a class="anchor" href="#_name"></a>NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-worktree - Manage multiple working trees</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git worktree add</em> [-f] [--detach] [--checkout] [--lock] [-b &lt;new-branch&gt;] &lt;path&gt; [&lt;commit-ish&gt;]
<em>git worktree list</em> [--porcelain]
<em>git worktree lock</em> [--reason &lt;string&gt;] &lt;worktree&gt;
<em>git worktree move</em> &lt;worktree&gt; &lt;new-path&gt;
<em>git worktree prune</em> [-n] [-v] [--expire &lt;expire&gt;]
<em>git worktree remove</em> [-f] &lt;worktree&gt;
<em>git worktree repair</em> [&lt;path&gt;&#8230;&#8203;]
<em>git worktree unlock</em> &lt;worktree&gt;</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Manage multiple working trees attached to the same repository.</p>
</div>
<div class="paragraph">
<p>A git repository can support multiple working trees, allowing you to check
out more than one branch at a time.  With <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code></span> a new working
tree is associated with the repository.  This new working tree is called a
"linked working tree" as opposed to the "main working tree" prepared by
<a href='{{< relurl "docs/git-init" >}}'>git-init[1]</a> or <a href='{{< relurl "docs/git-clone" >}}'>git-clone[1]</a>.
A repository has one main working tree (if it&#8217;s not a
bare repository) and zero or more linked working trees. When you are done
with a linked working tree, remove it with <span class='synopsis'><code>git</code> <code>worktree</code> <code>remove</code></span>.</p>
</div>
<div class="paragraph">
<p>In its simplest form, <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code> <em>&lt;path&gt;</em></span> automatically creates a
new branch whose name is the final component of <span class='synopsis'><em>&lt;path&gt;</em></span>, which is
convenient if you plan to work on a new topic. For instance, <span class='synopsis'><code>git</code>

<code>worktree</code> <code>add</code> <code>../hotfix</code></span> creates new branch <span class='synopsis'><code>hotfix</code></span> and checks it out at
path <span class='synopsis'><code>../hotfix</code></span>. To instead work on an existing branch in a new working
tree, use <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code> <em>&lt;path&gt;</em> <em>&lt;branch&gt;</em></span>. On the other hand, if you
just plan to make some experimental changes or do testing without
disturbing existing development, it is often convenient to create a
<em>throwaway</em> working tree not associated with any branch. For instance,
<span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code> <code>-d</code> <em>&lt;path&gt;</em></span> creates a new working tree with a detached
<span class='synopsis'><code>HEAD</code></span> at the same commit as the current branch.</p>
</div>
<div class="paragraph">
<p>If a working tree is deleted without using <span class='synopsis'><code>git</code> <code>worktree</code> <code>remove</code></span>, then
its associated administrative files, which reside in the repository
(see "DETAILS" below), will eventually be removed automatically (see
<span class='synopsis'><code>gc.worktreePruneExpire</code></span> in <a href='{{< relurl "docs/git-config" >}}'>git-config[1]</a>), or you can run
<span class='synopsis'><code>git</code> <code>worktree</code> <code>prune</code></span> in the main or any linked working tree to
clean up any stale administrative files.</p>
</div>
<div class="paragraph">
<p>If a linked working tree is stored on a portable device or network share
which is not always mounted, you can prevent its administrative files from
being pruned by issuing the <span class='synopsis'><code>git</code> <code>worktree</code> <code>lock</code></span> command, optionally
specifying <span class='synopsis'><code>--reason</code></span> to explain why the working tree is locked.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commands"><a class="anchor" href="#_commands"></a>COMMANDS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-worktree.txt-addltpathgtltcommit-ishgt"><a id="Documentation/git-worktree.txt-addpathcommit-ish" class="anchor" href="#Documentation/git-worktree.txt-addpathcommit-ish"></a>add &lt;path&gt; [&lt;commit-ish&gt;] </dt>
<dd>
<p>Create <span class='synopsis'><em>&lt;path&gt;</em></span> and checkout <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> into it. The new working directory
is linked to the current repository, sharing everything except working
directory specific files such as <span class='synopsis'><code>HEAD</code></span>, <span class='synopsis'><code>index</code></span>, etc. As a convenience,
<span class='synopsis'><em>&lt;commit-ish&gt;</em></span> may be a bare "<span class='synopsis'><code>-</code></span>", which is synonymous with <span class='synopsis'><code>@{-1}</code></span>.</p>
<div class="paragraph">
<p>If <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is a branch name (call it <span class='synopsis'><em>&lt;branch&gt;</em></span>) and is not found,
and neither <span class='synopsis'><code>-b</code></span> nor <span class='synopsis'><code>-B</code></span> nor <span class='synopsis'><code>--detach</code></span> are used, but there does
exist a tracking branch in exactly one remote (call it <span class='synopsis'><em>&lt;remote&gt;</em></span>)
with a matching name, treat as equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git worktree add --track -b &lt;branch&gt; &lt;path&gt; &lt;remote&gt;/&lt;branch&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If the branch exists in multiple remotes and one of them is named by
the <span class='synopsis'><code>checkout.defaultRemote</code></span> configuration variable, we&#8217;ll use that
one for the purposes of disambiguation, even if the <span class='synopsis'><em>&lt;branch&gt;</em></span> isn&#8217;t
unique across all remotes. Set it to
e.g. <span class='synopsis'><code>checkout.defaultRemote=origin</code></span> to always checkout remote
branches from there if <span class='synopsis'><em>&lt;branch&gt;</em></span> is ambiguous but exists on the
<span class='synopsis'><code>origin</code></span> remote. See also <span class='synopsis'><code>checkout.defaultRemote</code></span> in
<a href='{{< relurl "docs/git-config" >}}'>git-config[1]</a>.</p>
</div>
<div class="paragraph">
<p>If <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is omitted and neither <span class='synopsis'><code>-b</code></span> nor <span class='synopsis'><code>-B</code></span> nor <span class='synopsis'><code>--detach</code></span> used,
then, as a convenience, the new working tree is associated with a branch
(call it <span class='synopsis'><em>&lt;branch&gt;</em></span>) named after <span class='synopsis'><code>$</code>(<code>basename</code> <em>&lt;path&gt;</em>)</span>.  If <span class='synopsis'><em>&lt;branch&gt;</em></span>
doesn&#8217;t exist, a new branch based on <span class='synopsis'><code>HEAD</code></span> is automatically created as
if <span class='synopsis'><code>-b</code> <em>&lt;branch&gt;</em></span> was given.  If <span class='synopsis'><em>&lt;branch&gt;</em></span> does exist, it will be
checked out in the new working tree, if it&#8217;s not checked out anywhere
else, otherwise the command will refuse to create the working tree (unless
<span class='synopsis'><code>--force</code></span> is used).</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-list"><a class="anchor" href="#Documentation/git-worktree.txt-list"></a>list </dt>
<dd>
<p>List details of each working tree.  The main working tree is listed first,
followed by each of the linked working trees.  The output details include
whether the working tree is bare, the revision currently checked out, the
branch currently checked out (or "detached HEAD" if none), and "locked" if
the worktree is locked.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-lock"><a class="anchor" href="#Documentation/git-worktree.txt-lock"></a>lock </dt>
<dd>
<p>If a working tree is on a portable device or network share which
is not always mounted, lock it to prevent its administrative
files from being pruned automatically. This also prevents it from
being moved or deleted. Optionally, specify a reason for the lock
with <span class='synopsis'><code>--reason</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-move"><a class="anchor" href="#Documentation/git-worktree.txt-move"></a>move </dt>
<dd>
<p>Move a working tree to a new location. Note that the main working tree
or linked working trees containing submodules cannot be moved with this
command. (The <span class='synopsis'><code>git</code> <code>worktree</code> <code>repair</code></span> command, however, can reestablish
the connection with linked working trees if you move the main working
tree manually.)</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-prune"><a class="anchor" href="#Documentation/git-worktree.txt-prune"></a>prune </dt>
<dd>
<p>Prune working tree information in <span class='synopsis'><code>$GIT_DIR/worktrees</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-remove"><a class="anchor" href="#Documentation/git-worktree.txt-remove"></a>remove </dt>
<dd>
<p>Remove a working tree. Only clean working trees (no untracked files
and no modification in tracked files) can be removed. Unclean working
trees or ones with submodules can be removed with <span class='synopsis'><code>--force</code></span>. The main
working tree cannot be removed.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-repairltpathgt82308203"><a id="Documentation/git-worktree.txt-repairpath" class="anchor" href="#Documentation/git-worktree.txt-repairpath"></a>repair [&lt;path&gt;&#8230;&#8203;] </dt>
<dd>
<p>Repair working tree administrative files, if possible, if they have
become corrupted or outdated due to external factors.</p>
<div class="paragraph">
<p>For instance, if the main working tree (or bare repository) is moved,
linked working trees will be unable to locate it. Running <span class='synopsis'><code>repair</code></span> in
the main working tree will reestablish the connection from linked
working trees back to the main working tree.</p>
</div>
<div class="paragraph">
<p>Similarly, if a linked working tree is moved without using <span class='synopsis'><code>git</code> <code>worktree</code>

<code>move</code></span>, the main working tree (or bare repository) will be unable to
locate it. Running <span class='synopsis'><code>repair</code></span> within the recently-moved working tree will
reestablish the connection. If multiple linked working trees are moved,
running <span class='synopsis'><code>repair</code></span> from any working tree with each tree&#8217;s new <span class='synopsis'><em>&lt;path&gt;</em></span> as
an argument, will reestablish the connection to all the specified paths.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-unlock"><a class="anchor" href="#Documentation/git-worktree.txt-unlock"></a>unlock </dt>
<dd>
<p>Unlock a working tree, allowing it to be pruned, moved or deleted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options"><a class="anchor" href="#_options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-worktree.txt--f"><a class="anchor" href="#Documentation/git-worktree.txt--f"></a>-f </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---force"><a class="anchor" href="#Documentation/git-worktree.txt---force"></a>--force </dt>
<dd>
<p>By default, <span class='synopsis'><code>add</code></span> refuses to create a new working tree when
<span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is a branch name and is already checked out by
another working tree, or if <span class='synopsis'><em>&lt;path&gt;</em></span> is already assigned to some
working tree but is missing (for instance, if <span class='synopsis'><em>&lt;path&gt;</em></span> was deleted
manually). This option overrides these safeguards. To add a missing but
locked working tree path, specify <span class='synopsis'><code>--force</code></span> twice.</p>
<div class="paragraph">
<p><span class='synopsis'><code>move</code></span> refuses to move a locked working tree unless <span class='synopsis'><code>--force</code></span> is specified
twice. If the destination is already assigned to some other working tree but is
missing (for instance, if <span class='synopsis'><em>&lt;new-path&gt;</em></span> was deleted manually), then <span class='synopsis'><code>--force</code></span>
allows the move to proceed; use <span class='synopsis'><code>--force</code></span> twice if the destination is locked.</p>
</div>
<div class="paragraph">
<p><span class='synopsis'><code>remove</code></span> refuses to remove an unclean working tree unless <span class='synopsis'><code>--force</code></span> is used.
To remove a locked working tree, specify <span class='synopsis'><code>--force</code></span> twice.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--bltnew-branchgt"><a id="Documentation/git-worktree.txt--bnew-branch" class="anchor" href="#Documentation/git-worktree.txt--bnew-branch"></a>-b &lt;new-branch&gt; </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt--Bltnew-branchgt"><a id="Documentation/git-worktree.txt--Bnew-branch" class="anchor" href="#Documentation/git-worktree.txt--Bnew-branch"></a>-B &lt;new-branch&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>add</code></span>, create a new branch named <span class='synopsis'><em>&lt;new-branch&gt;</em></span> starting at
<span class='synopsis'><em>&lt;commit-ish&gt;</em></span>, and check out <span class='synopsis'><em>&lt;new-branch&gt;</em></span> into the new working tree.
If <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is omitted, it defaults to <span class='synopsis'><code>HEAD</code></span>.
By default, <span class='synopsis'><code>-b</code></span> refuses to create a new branch if it already
exists. <span class='synopsis'><code>-B</code></span> overrides this safeguard, resetting <span class='synopsis'><em>&lt;new-branch&gt;</em></span> to
<span class='synopsis'><em>&lt;commit-ish&gt;</em></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--d"><a class="anchor" href="#Documentation/git-worktree.txt--d"></a>-d </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---detach"><a class="anchor" href="#Documentation/git-worktree.txt---detach"></a>--detach </dt>
<dd>
<p>With <span class='synopsis'><code>add</code></span>, detach <span class='synopsis'><code>HEAD</code></span> in the new working tree. See "DETACHED HEAD"
in <a href='{{< relurl "docs/git-checkout" >}}'>git-checkout[1]</a>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---no-checkout"><a class="anchor" href="#Documentation/git-worktree.txt---no-checkout"></a>--[no-]checkout </dt>
<dd>
<p>By default, <span class='synopsis'><code>add</code></span> checks out <span class='synopsis'><em>&lt;commit-ish&gt;</em></span>, however, <span class='synopsis'><code>--no-checkout</code></span> can
be used to suppress checkout in order to make customizations,
such as configuring sparse-checkout. See "Sparse checkout"
in <a href='{{< relurl "docs/git-read-tree" >}}'>git-read-tree[1]</a>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---no-guess-remote"><a class="anchor" href="#Documentation/git-worktree.txt---no-guess-remote"></a>--[no-]guess-remote </dt>
<dd>
<p>With <span class='synopsis'><code>worktree</code> <code>add</code> <em>&lt;path&gt;</em></span>, without <span class='synopsis'><em>&lt;commit-ish&gt;</em></span>, instead
of creating a new branch from <span class='synopsis'><code>HEAD</code></span>, if there exists a tracking
branch in exactly one remote matching the basename of <span class='synopsis'><em>&lt;path&gt;</em></span>,
base the new branch on the remote-tracking branch, and mark
the remote-tracking branch as "upstream" from the new branch.</p>
<div class="paragraph">
<p>This can also be set up as the default behaviour by using the
<span class='synopsis'><code>worktree.guessRemote</code></span> config option.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---no-track"><a class="anchor" href="#Documentation/git-worktree.txt---no-track"></a>--[no-]track </dt>
<dd>
<p>When creating a new branch, if <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is a branch,
mark it as "upstream" from the new branch.  This is the
default if <span class='synopsis'><em>&lt;commit-ish&gt;</em></span> is a remote-tracking branch.  See
<span class='synopsis'><code>--track</code></span> in <a href='{{< relurl "docs/git-branch" >}}'>git-branch[1]</a> for details.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---lock"><a class="anchor" href="#Documentation/git-worktree.txt---lock"></a>--lock </dt>
<dd>
<p>Keep the working tree locked after creation. This is the
equivalent of <span class='synopsis'><code>git</code> <code>worktree</code> <code>lock</code></span> after <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code></span>,
but without a race condition.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--n"><a class="anchor" href="#Documentation/git-worktree.txt--n"></a>-n </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---dry-run"><a class="anchor" href="#Documentation/git-worktree.txt---dry-run"></a>--dry-run </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, do not remove anything; just report what it would
remove.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---porcelain"><a class="anchor" href="#Documentation/git-worktree.txt---porcelain"></a>--porcelain </dt>
<dd>
<p>With <span class='synopsis'><code>list</code></span>, output in an easy-to-parse format for scripts.
This format will remain stable across Git versions and regardless of user
configuration.  See below for details.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--q"><a class="anchor" href="#Documentation/git-worktree.txt--q"></a>-q </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---quiet"><a class="anchor" href="#Documentation/git-worktree.txt---quiet"></a>--quiet </dt>
<dd>
<p>With <span class='synopsis'><code>add</code></span>, suppress feedback messages.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt--v"><a class="anchor" href="#Documentation/git-worktree.txt--v"></a>-v </dt>
<dt class="hdlist1" id="Documentation/git-worktree.txt---verbose"><a class="anchor" href="#Documentation/git-worktree.txt---verbose"></a>--verbose </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, report all removals.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---expirelttimegt"><a id="Documentation/git-worktree.txt---expiretime" class="anchor" href="#Documentation/git-worktree.txt---expiretime"></a>--expire &lt;time&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>prune</code></span>, only expire unused working trees older than <span class='synopsis'><em>&lt;time&gt;</em></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt---reasonltstringgt"><a id="Documentation/git-worktree.txt---reasonstring" class="anchor" href="#Documentation/git-worktree.txt---reasonstring"></a>--reason &lt;string&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>lock</code></span>, an explanation why the working tree is locked.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-worktree.txt-ltworktreegt"><a id="Documentation/git-worktree.txt-worktree" class="anchor" href="#Documentation/git-worktree.txt-worktree"></a>&lt;worktree&gt; </dt>
<dd>
<p>Working trees can be identified by path, either relative or
absolute.</p>
<div class="paragraph">
<p>If the last path components in the working tree&#8217;s path is unique among
working trees, it can be used to identify a working tree. For example if
you only have two working trees, at <span class='synopsis'><code>/abc/def/ghi</code></span> and <span class='synopsis'><code>/abc/def/ggg</code></span>,
then <span class='synopsis'><code>ghi</code></span> or <span class='synopsis'><code>def/ghi</code></span> is enough to point to the former working tree.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_refs"><a class="anchor" href="#_refs"></a>REFS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In multiple working trees, some refs may be shared between all working
trees and some refs are local. One example is <span class='synopsis'><code>HEAD</code></span> which is different for each
working tree. This section is about the sharing rules and how to access
refs of one working tree from another.</p>
</div>
<div class="paragraph">
<p>In general, all pseudo refs are per working tree and all refs starting
with <span class='synopsis'><code>refs/</code></span> are shared. Pseudo refs are ones like <span class='synopsis'><code>HEAD</code></span> which are
directly under <span class='synopsis'><code>$GIT_DIR</code></span> instead of inside <span class='synopsis'><code>$GIT_DIR/refs</code></span>. There are
exceptions, however: refs inside <span class='synopsis'><code>refs/bisect</code></span> and <span class='synopsis'><code>refs/worktree</code></span> are not
shared.</p>
</div>
<div class="paragraph">
<p>Refs that are per working tree can still be accessed from another
working tree via two special paths, <span class='synopsis'><code>main-worktree</code></span> and <span class='synopsis'><code>worktrees</code></span>. The
former gives access to per-working tree refs of the main working tree,
while the latter to all linked working trees.</p>
</div>
<div class="paragraph">
<p>For example, <span class='synopsis'><code>main-worktree/HEAD</code></span> or <span class='synopsis'><code>main-worktree/refs/bisect/good</code></span>
resolve to the same value as the main working tree&#8217;s <span class='synopsis'><code>HEAD</code></span> and
<span class='synopsis'><code>refs/bisect/good</code></span> respectively. Similarly, <span class='synopsis'><code>worktrees/foo/HEAD</code></span> or
<span class='synopsis'><code>worktrees/bar/refs/bisect/bad</code></span> are the same as
<span class='synopsis'><code>$GIT_COMMON_DIR/worktrees/foo/HEAD</code></span> and
<span class='synopsis'><code>$GIT_COMMON_DIR/worktrees/bar/refs/bisect/bad</code></span>.</p>
</div>
<div class="paragraph">
<p>To access refs, it&#8217;s best not to look inside <span class='synopsis'><code>$GIT_DIR</code></span> directly. Instead
use commands such as <a href='{{< relurl "docs/git-rev-parse" >}}'>git-rev-parse[1]</a> or <a href='{{< relurl "docs/git-update-ref" >}}'>git-update-ref[1]</a>
which will handle refs correctly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_file"><a class="anchor" href="#_configuration_file"></a>CONFIGURATION FILE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the repository <span class='synopsis'><code>config</code></span> file is shared across all working
trees. If the config variables <span class='synopsis'><code>core.bare</code></span> or <span class='synopsis'><code>core.worktree</code></span> are
already present in the config file, they will be applied to the main
working trees only.</p>
</div>
<div class="paragraph">
<p>In order to have configuration specific to working trees, you can turn
on the <span class='synopsis'><code>worktreeConfig</code></span> extension, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git config extensions.worktreeConfig true</pre>
</div>
</div>
<div class="paragraph">
<p>In this mode, specific configuration stays in the path pointed by <span class='synopsis'><code>git</code>

<code>rev-parse</code> <code>--git-path</code> <code>config.worktree</code></span>. You can add or update
configuration in this file with <span class='synopsis'><code>git</code> <code>config</code> <code>--worktree</code></span>. Older Git
versions will refuse to access repositories with this extension.</p>
</div>
<div class="paragraph">
<p>Note that in this file, the exception for <span class='synopsis'><code>core.bare</code></span> and <span class='synopsis'><code>core.worktree</code></span>
is gone. If they exist in <span class='synopsis'><code>$GIT_DIR/config</code></span>, you must move
them to the <span class='synopsis'><code>config.worktree</code></span> of the main working tree. You may also
take this opportunity to review and move other configuration that you
do not want to share to all working trees:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class='synopsis'><code>core.worktree</code></span> and <span class='synopsis'><code>core.bare</code></span> should never be shared</p>
</li>
<li>
<p><span class='synopsis'><code>core.sparseCheckout</code></span> is recommended per working tree, unless you
are sure you always use sparse checkout for all working trees.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_details"><a class="anchor" href="#_details"></a>DETAILS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each linked working tree has a private sub-directory in the repository&#8217;s
<span class='synopsis'><code>$GIT_DIR/worktrees</code></span> directory.  The private sub-directory&#8217;s name is usually
the base name of the linked working tree&#8217;s path, possibly appended with a
number to make it unique.  For example, when <span class='synopsis'><code>$GIT_DIR=/path/main/.git</code></span> the
command <span class='synopsis'><code>git</code> <code>worktree</code> <code>add</code> <code>/path/other/test-next</code> <code>next</code></span> creates the linked
working tree in <span class='synopsis'><code>/path/other/test-next</code></span> and also creates a
<span class='synopsis'><code>$GIT_DIR/worktrees/test-next</code></span> directory (or <span class='synopsis'><code>$GIT_DIR/worktrees/test-next1</code></span>
if <span class='synopsis'><code>test-next</code></span> is already taken).</p>
</div>
<div class="paragraph">
<p>Within a linked working tree, <span class='synopsis'><code>$GIT_DIR</code></span> is set to point to this private
directory (e.g. <span class='synopsis'><code>/path/main/.git/worktrees/test-next</code></span> in the example) and
<span class='synopsis'><code>$GIT_COMMON_DIR</code></span> is set to point back to the main working tree&#8217;s <span class='synopsis'><code>$GIT_DIR</code></span>
(e.g. <span class='synopsis'><code>/path/main/.git</code></span>). These settings are made in a <span class='synopsis'><code>.git</code></span> file located at
the top directory of the linked working tree.</p>
</div>
<div class="paragraph">
<p>Path resolution via <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code></span> uses either
<span class='synopsis'><code>$GIT_DIR</code></span> or <span class='synopsis'><code>$GIT_COMMON_DIR</code></span> depending on the path. For example, in the
linked working tree <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code> <code>HEAD</code></span> returns
<span class='synopsis'><code>/path/main/.git/worktrees/test-next/HEAD</code></span> (not
<span class='synopsis'><code>/path/other/test-next/.git/HEAD</code></span> or <span class='synopsis'><code>/path/main/.git/HEAD</code></span>) while <span class='synopsis'><code>git</code>

<code>rev-parse</code> <code>--git-path</code> <code>refs/heads/master</code></span> uses
<span class='synopsis'><code>$GIT_COMMON_DIR</code></span> and returns <span class='synopsis'><code>/path/main/.git/refs/heads/master</code></span>,
since refs are shared across all working trees, except <span class='synopsis'><code>refs/bisect</code></span> and
<span class='synopsis'><code>refs/worktree</code></span>.</p>
</div>
<div class="paragraph">
<p>See <a href='{{< relurl "docs/gitrepository-layout" >}}'>gitrepository-layout[5]</a> for more information. The rule of
thumb is do not make any assumption about whether a path belongs to
<span class='synopsis'><code>$GIT_DIR</code></span> or <span class='synopsis'><code>$GIT_COMMON_DIR</code></span> when you need to directly access something
inside <span class='synopsis'><code>$GIT_DIR</code></span>. Use <span class='synopsis'><code>git</code> <code>rev-parse</code> <code>--git-path</code></span> to get the final path.</p>
</div>
<div class="paragraph">
<p>If you manually move a linked working tree, you need to update the <span class='synopsis'><code>gitdir</code></span> file
in the entry&#8217;s directory. For example, if a linked working tree is moved
to <span class='synopsis'><code>/newpath/test-next</code></span> and its <span class='synopsis'><code>.git</code></span> file points to
<span class='synopsis'><code>/path/main/.git/worktrees/test-next</code></span>, then update
<span class='synopsis'><code>/path/main/.git/worktrees/test-next/gitdir</code></span> to reference <span class='synopsis'><code>/newpath/test-next</code></span>
instead. Better yet, run <span class='synopsis'><code>git</code> <code>worktree</code> <code>repair</code></span> to reestablish the connection
automatically.</p>
</div>
<div class="paragraph">
<p>To prevent a <span class='synopsis'><code>$GIT_DIR/worktrees</code></span> entry from being pruned (which
can be useful in some situations, such as when the
entry&#8217;s working tree is stored on a portable device), use the
<span class='synopsis'><code>git</code> <code>worktree</code> <code>lock</code></span> command, which adds a file named
<span class='synopsis'><code>locked</code></span> to the entry&#8217;s directory. The file contains the reason in
plain text. For example, if a linked working tree&#8217;s <span class='synopsis'><code>.git</code></span> file points
to <span class='synopsis'><code>/path/main/.git/worktrees/test-next</code></span> then a file named
<span class='synopsis'><code>/path/main/.git/worktrees/test-next/locked</code></span> will prevent the
<span class='synopsis'><code>test-next</code></span> entry from being pruned.  See
<a href='{{< relurl "docs/gitrepository-layout" >}}'>gitrepository-layout[5]</a> for details.</p>
</div>
<div class="paragraph">
<p>When <span class='synopsis'><code>extensions.worktreeConfig</code></span> is enabled, the config file
<span class='synopsis'><code>.git/worktrees/</code><em>&lt;id&gt;</em><code>/config.worktree</code></span> is read after <span class='synopsis'><code>.git/config</code></span> is.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_list_output_format"><a class="anchor" href="#_list_output_format"></a>LIST OUTPUT FORMAT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <span class='synopsis'><code>worktree</code> <code>list</code></span> command has two output formats. The default format shows the
details on a single line with columns.  For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git worktree list
/path/to/bare-source            (bare)
/path/to/linked-worktree        abcd1234 [master]
/path/to/other-linked-worktree  1234abc  (detached HEAD)</pre>
</div>
</div>
<div class="sect2">
<h3 id="_porcelain_format"><a class="anchor" href="#_porcelain_format"></a>Porcelain Format</h3>
<div class="paragraph">
<p>The porcelain format has a line per attribute.  Attributes are listed with a
label and value separated by a single space.  Boolean attributes (like <span class='synopsis'><code>bare</code></span>
and <span class='synopsis'><code>detached</code></span>) are listed as a label only, and are present only
if the value is true.  The first attribute of a working tree is always
<span class='synopsis'><code>worktree</code></span>, an empty line indicates the end of the record.  For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git worktree list --porcelain
worktree /path/to/bare-source
bare

worktree /path/to/linked-worktree
HEAD abcd1234abcd1234abcd1234abcd1234abcd1234
branch refs/heads/master

worktree /path/to/other-linked-worktree
HEAD 1234abc1234abc1234abc1234abc1234abc1234a
detached</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You are in the middle of a refactoring session and your boss comes in and
demands that you fix something immediately. You might typically use
<a href='{{< relurl "docs/git-stash" >}}'>git-stash[1]</a> to store your changes away temporarily, however, your
working tree is in such a state of disarray (with new, moved, and removed
files, and other bits and pieces strewn around) that you don&#8217;t want to risk
disturbing any of it. Instead, you create a temporary linked working tree to
make the emergency fix, remove it when done, and then resume your earlier
refactoring session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git worktree add -b emergency-fix ../temp master
$ pushd ../temp
# ... hack hack hack ...
$ git commit -a -m 'emergency fix for boss'
$ popd
$ git worktree remove ../temp</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs"><a class="anchor" href="#_bugs"></a>BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multiple checkout in general is still experimental, and the support
for submodules is incomplete. It is NOT recommended to make multiple
checkouts of a superproject.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href='{{< relurl "docs/git" >}}'>git[1]</a> suite</p>
</div>
</div>
</div>