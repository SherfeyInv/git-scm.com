---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-multi-pack-index Documentation
docname: git-multi-pack-index
version: 2.50.0
aliases:
- "/docs/git-multi-pack-index/2.50.0/index.html"
---
<div class="sect1">
<h2 id="_name"><a class="anchor" href="#_name"></a>NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-multi-pack-index - Write and verify multi-pack-indexes</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git multi-pack-index</em> [--object-dir=&lt;dir&gt;] [--[no-]bitmap] &lt;sub-command&gt;</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Write or verify a multi-pack-index (MIDX) file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options"><a class="anchor" href="#_options"></a>OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---object-dirltdirgt"><a id="Documentation/git-multi-pack-index.txt---object-dirdir" class="anchor" href="#Documentation/git-multi-pack-index.txt---object-dirdir"></a>--object-dir=&lt;dir&gt; </dt>
<dd>
<p>Use given directory for the location of Git objects. We check
<span class='synopsis'><em>&lt;dir&gt;</em><code>/packs/multi-pack-index</code></span> for the current MIDX file, and
<span class='synopsis'><em>&lt;dir&gt;</em><code>/packs</code></span> for the pack-files to index.</p>
<div class="paragraph">
<p><span class='synopsis'><em>&lt;dir&gt;</em></span> must be an alternate of the current repository.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---no-progress"><a class="anchor" href="#Documentation/git-multi-pack-index.txt---no-progress"></a>--[no-]progress </dt>
<dd>
<p>Turn progress on/off explicitly. If neither is specified, progress is
shown if standard error is connected to a terminal. Supported by
sub-commands <span class='synopsis'><code>write</code></span>, <span class='synopsis'><code>verify</code></span>, <span class='synopsis'><code>expire</code></span>, and `repack.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following subcommands are available:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-write"><a class="anchor" href="#Documentation/git-multi-pack-index.txt-write"></a>write </dt>
<dd>
<p>Write a new MIDX file. The following options are available for
the <span class='synopsis'><code>write</code></span> sub-command:</p>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---preferred-packltpackgt"><a id="Documentation/git-multi-pack-index.txt---preferred-packpack" class="anchor" href="#Documentation/git-multi-pack-index.txt---preferred-packpack"></a>--preferred-pack=&lt;pack&gt; </dt>
<dd>
<p>When specified, break ties in favor of this pack when
there are additional copies of its objects in other
packs. Ties for objects not found in the preferred
pack are always resolved in favor of the copy in the
pack with the highest mtime. If unspecified, the pack
with the lowest mtime is used by default. The
preferred pack must have at least one object.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---no-bitmap"><a class="anchor" href="#Documentation/git-multi-pack-index.txt---no-bitmap"></a>--[no-]bitmap </dt>
<dd>
<p>Control whether or not a multi-pack bitmap is written.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---stdin-packs"><a class="anchor" href="#Documentation/git-multi-pack-index.txt---stdin-packs"></a>--stdin-packs </dt>
<dd>
<p>Write a multi-pack index containing only the set of
line-delimited pack index basenames provided over stdin.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---refs-snapshotltpathgt"><a id="Documentation/git-multi-pack-index.txt---refs-snapshotpath" class="anchor" href="#Documentation/git-multi-pack-index.txt---refs-snapshotpath"></a>--refs-snapshot=&lt;path&gt; </dt>
<dd>
<p>With <span class='synopsis'><code>--bitmap</code></span>, optionally specify a file which
contains a "refs snapshot" taken prior to repacking.</p>
<div class="paragraph">
<p>A reference snapshot is composed of line-delimited OIDs corresponding to
the reference tips, usually taken by <span class='synopsis'><code>git</code> <code>repack</code></span> prior to generating a
new pack. A line may optionally start with a <span class='synopsis'><code>+</code></span> character to indicate
that the reference which corresponds to that OID is "preferred" (see
<a href='{{< relurl "docs/git-config" >}}'>git-config[1]</a>'s <span class='synopsis'><code>pack.preferBitmapTips</code></span>.)</p>
</div>
<div class="paragraph">
<p>The file given at <span class='synopsis'><em>&lt;path&gt;</em></span> is expected to be readable, and can contain
duplicates. (If a given OID is given more than once, it is marked as
preferred if at least one instance of it begins with the special <span class='synopsis'><code>+</code></span>
marker).</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---incremental"><a class="anchor" href="#Documentation/git-multi-pack-index.txt---incremental"></a>--incremental </dt>
<dd>
<p>Write an incremental MIDX file containing only objects
and packs not present in an existing MIDX layer.
Migrates non-incremental MIDXs to incremental ones when
necessary. Incompatible with <span class='synopsis'><code>--bitmap</code></span>.</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-verify"><a class="anchor" href="#Documentation/git-multi-pack-index.txt-verify"></a>verify </dt>
<dd>
<p>Verify the contents of the MIDX file.</p>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-expire"><a class="anchor" href="#Documentation/git-multi-pack-index.txt-expire"></a>expire </dt>
<dd>
<p>Delete the pack-files that are tracked by the MIDX file, but
have no objects referenced by the MIDX (with the exception of
<span class='synopsis'><code>.keep</code></span> packs and cruft packs). Rewrite the MIDX file afterward
to remove all references to these pack-files.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
this mode is incompatible with incremental MIDX files.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-repack"><a class="anchor" href="#Documentation/git-multi-pack-index.txt-repack"></a>repack </dt>
<dd>
<p>Create a new pack-file containing objects in small pack-files
referenced by the multi-pack-index. If the size given by the
<span class='synopsis'><code>--batch-size=</code><em>&lt;size&gt;</em></span> argument is zero, then create a pack
containing all objects referenced by the multi-pack-index. For
a non-zero batch size, Select the pack-files by examining packs
from oldest-to-newest, computing the "expected size" by counting
the number of objects in the pack referenced by the
multi-pack-index, then divide by the total number of objects in
the pack and multiply by the pack size. We select packs with
expected size below the batch size until the set of packs have
total expected size at least the batch size, or all pack-files
are considered. If only one pack-file is selected, then do
nothing. If a new pack-file is created, rewrite the
multi-pack-index to reference the new pack-file. A later run of
<em>git multi-pack-index expire</em> will delete the pack-files that
were part of this batch.</p>
<div class="paragraph">
<p>If <span class='synopsis'><code>repack.packKeptObjects</code></span> is <span class='synopsis'><code>false</code></span>, then any pack-files with an
associated <span class='synopsis'><code>.keep</code></span> file will not be selected for the batch to repack.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
this mode is incompatible with incremental MIDX files.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>EXAMPLES</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Write a MIDX file for the packfiles in the current <span class='synopsis'><code>.git</code></span> directory.</p>
<div class="listingblock">
<div class="content">
<pre>$ git multi-pack-index write</pre>
</div>
</div>
</li>
<li>
<p>Write a MIDX file for the packfiles in the current <span class='synopsis'><code>.git</code></span> directory with a
corresponding bitmap.</p>
<div class="listingblock">
<div class="content">
<pre>$ git multi-pack-index write --preferred-pack=&lt;pack&gt; --bitmap</pre>
</div>
</div>
</li>
<li>
<p>Write a MIDX file for the packfiles in an alternate object store.</p>
<div class="listingblock">
<div class="content">
<pre>$ git multi-pack-index --object-dir &lt;alt&gt; write</pre>
</div>
</div>
</li>
<li>
<p>Verify the MIDX file for the packfiles in the current <span class='synopsis'><code>.git</code></span> directory.</p>
<div class="listingblock">
<div class="content">
<pre>$ git multi-pack-index verify</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="{{< relurl "docs/multi-pack-index" >}}">The Multi-Pack-Index Design
Document</a> and <a href='{{< relurl "docs/gitformat-pack" >}}'>gitformat-pack[5]</a> for more information on the
multi-pack-index feature and its file format.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the <a href='{{< relurl "docs/git" >}}'>git[1]</a> suite</p>
</div>
</div>
</div>