---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - api-path-walk Documentation
docname: api-path-walk
version: 2.49.0
latest-changes: 2.49.0
aliases:
- "/docs/api-path-walk/index.html"
---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The path-walk API is used to walk reachable objects, but to visit objects
in batches based on a common path they appear in, or by type.</p>
</div>
<div class="paragraph">
<p>For example, all reachable commits are visited in a group. All tags are
visited in a group. Then, all root trees are visited. At some point, all
blobs reachable via a path <code>my/dir/to/A</code> are visited. When there are
multiple paths possible to reach the same object, then only one of those
paths is used to visit the object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use the path-walk API, include <code>path-walk.h</code> and call
<code>walk_objects_by_path()</code> with a customized <code>path_walk_info</code> struct. The
struct is used to set all of the options for how the walk should proceed.
Let&#8217;s dig into the different options and their use.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-codepathfncodeandcodepathfndatacode"><a id="Documentation/technical/api-path-walk.txt-pathfnandpathfndata" class="anchor" href="#Documentation/technical/api-path-walk.txt-pathfnandpathfndata"></a><code>path_fn</code> and <code>path_fn_data</code> </dt>
<dd>
<p>The most important option is the <code>path_fn</code> option, which is a
function pointer to the callback that can execute logic on the
object IDs for objects grouped by type and path. This function
also receives a <code>data</code> value that corresponds to the
<code>path_fn_data</code> member, for providing custom data structures to
this callback function.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-coderevscode"><a id="Documentation/technical/api-path-walk.txt-revs" class="anchor" href="#Documentation/technical/api-path-walk.txt-revs"></a><code>revs</code> </dt>
<dd>
<p>To configure the exact details of the reachable set of objects,
use the <code>revs</code> member and initialize it using the revision
machinery in <code>revision.h</code>. Initialize <code>revs</code> using calls such as
<code>setup_revisions()</code> or <code>parse_revision_opt()</code>. Do not call
<code>prepare_revision_walk()</code>, as that will be called within
<code>walk_objects_by_path()</code>.</p>
<div class="paragraph">
<p>It is also important that you do not specify the <code>--objects</code> flag for the
<code>revs</code> struct. The revision walk should only be used to walk commits, and
the objects will be walked in a separate way based on those starting
commits.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-codecommitscodecodeblobscodecodetreescodecodetagscode"><a id="Documentation/technical/api-path-walk.txt-commitsblobstreestags" class="anchor" href="#Documentation/technical/api-path-walk.txt-commitsblobstreestags"></a><code>commits</code>, <code>blobs</code>, <code>trees</code>, <code>tags</code> </dt>
<dd>
<p>By default, these members are enabled and signal that the path-walk
API should call the <code>path_fn</code> on objects of these types. Specialized
applications could disable some options to make it simpler to walk
the objects or to have fewer calls to <code>path_fn</code>.</p>
<div class="paragraph">
<p>While it is possible to walk only commits in this way, consumers would be
better off using the revision walk API instead.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-codeprunealluninterestingcode"><a id="Documentation/technical/api-path-walk.txt-prunealluninteresting" class="anchor" href="#Documentation/technical/api-path-walk.txt-prunealluninteresting"></a><code>prune_all_uninteresting</code> </dt>
<dd>
<p>By default, all reachable paths are emitted by the path-walk API.
This option allows consumers to declare that they are not
interested in paths where all included objects are marked with the
<code>UNINTERESTING</code> flag. This requires using the <code>boundary</code> option in
the revision walk so that the walk emits commits marked with the
<code>UNINTERESTING</code> flag.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-codeplcode"><a id="Documentation/technical/api-path-walk.txt-pl" class="anchor" href="#Documentation/technical/api-path-walk.txt-pl"></a><code>pl</code> </dt>
<dd>
<p>This pattern list pointer allows focusing the path-walk search to
a set of patterns, only emitting paths that match the given
patterns. See <a href='{{< relurl "docs/gitignore" >}}'>gitignore[5]</a> or
<a href='{{< relurl "docs/git-sparse-checkout" >}}'>git-sparse-checkout[1]</a> for details about pattern lists.
When the pattern list uses cone-mode patterns, then the path-walk
API can prune the set of paths it walks to improve performance.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See example usages in:
	<code>t/helper/test-path-walk.c</code>,
	<code>builtin/backfill.c</code></p>
</div>
</div>
</div>