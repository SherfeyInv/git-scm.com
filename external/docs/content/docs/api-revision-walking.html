---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - api-revision-walking Documentation
docname: api-revision-walking
version: 2.20.0
latest-changes: 2.20.0
aliases:
- "/docs/api-revision-walking/index.html"
---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The revision walking API offers functions to build a list of revisions
and then iterate over that list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calling_sequence"><a class="anchor" href="#_calling_sequence"></a>Calling sequence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The walking API has a given calling sequence: first you need to
initialize a rev_info structure, then add revisions to control what kind
of revision list do you want to get, finally you can iterate over the
revision list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions"><a class="anchor" href="#_functions"></a>Functions</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscoderepoinitrevisionscodespan"><a id="Documentation/technical/api-revision-walking.txt-repoinitrevisions" class="anchor" href="#Documentation/technical/api-revision-walking.txt-repoinitrevisions"></a><span class='synopsis'><code>repo_init_revisions</code></span> </dt>
<dd>
<p>Initialize a rev_info structure with default values. The third
parameter may be NULL or can be prefix path, and then the <span class='synopsis'><code>.prefix</code></span>
variable will be set to it. This is typically the first function you
want to call when you want to deal with a revision list. After calling
this function, you are free to customize options, like set
<span class='synopsis'><code>.ignore_merges</code></span> to 0 if you don&#8217;t want to ignore merges, and so on. See
<span class='synopsis'><code>revision.h</code></span> for a complete list of available options.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscodeaddpendingobjectcodespan"><a id="Documentation/technical/api-revision-walking.txt-addpendingobject" class="anchor" href="#Documentation/technical/api-revision-walking.txt-addpendingobject"></a><span class='synopsis'><code>add_pending_object</code></span> </dt>
<dd>
<p>This function can be used if you want to add commit objects as revision
information. You can use the <span class='synopsis'><code>UNINTERESTING</code></span> object flag to indicate if
you want to include or exclude the given commit (and commits reachable
from the given commit) from the revision list.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have the commits as a string list then you probably want to
use setup_revisions(), instead of parsing each string and using this
function.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscodesetuprevisionscodespan"><a id="Documentation/technical/api-revision-walking.txt-setuprevisions" class="anchor" href="#Documentation/technical/api-revision-walking.txt-setuprevisions"></a><span class='synopsis'><code>setup_revisions</code></span> </dt>
<dd>
<p>Parse revision information, filling in the <span class='synopsis'><code>rev_info</code></span> structure, and
removing the used arguments from the argument list. Returns the number
of arguments left that weren&#8217;t recognized, which are also moved to the
head of the argument list. The last parameter is used in case no
parameter given by the first two arguments.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscodepreparerevisionwalkcodespan"><a id="Documentation/technical/api-revision-walking.txt-preparerevisionwalk" class="anchor" href="#Documentation/technical/api-revision-walking.txt-preparerevisionwalk"></a><span class='synopsis'><code>prepare_revision_walk</code></span> </dt>
<dd>
<p>Prepares the rev_info structure for a walk. You should check if it
returns any error (non-zero return code) and if it does not, you can
start using get_revision() to do the iteration.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscodegetrevisioncodespan"><a id="Documentation/technical/api-revision-walking.txt-getrevision" class="anchor" href="#Documentation/technical/api-revision-walking.txt-getrevision"></a><span class='synopsis'><code>get_revision</code></span> </dt>
<dd>
<p>Takes a pointer to a <span class='synopsis'><code>rev_info</code></span> structure and iterates over it,
returning a <span class='synopsis'><code>struct</code> <code>commit</code> <code>*</code></span> each time you call it. The end of the
revision list is indicated by returning a NULL pointer.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-revision-walking.txt-spanclasssynopsiscoderesetrevisionwalkcodespan"><a id="Documentation/technical/api-revision-walking.txt-resetrevisionwalk" class="anchor" href="#Documentation/technical/api-revision-walking.txt-resetrevisionwalk"></a><span class='synopsis'><code>reset_revision_walk</code></span> </dt>
<dd>
<p>Reset the flags used by the revision walking api. You can use
this to do multiple sequential revision walks.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_structures"><a class="anchor" href="#_data_structures"></a>Data structures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Talk about &lt;revision.h&gt;, things like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>two diff_options, one for path limiting, another for output;</p>
</li>
<li>
<p>remaining functions;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>(Linus, JC, Dscho)</p>
</div>
</div>
</div>