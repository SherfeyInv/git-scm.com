---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - api-allocation-growing Documentation
docname: api-allocation-growing
version: 2.2.3
aliases:
- "/docs/api-allocation-growing/2.2.3/index.html"
- "/docs/api-allocation-growing/2.3.10/index.html"
- "/docs/api-allocation-growing/2.4.12/index.html"
- "/docs/api-allocation-growing/2.5.6/index.html"
- "/docs/api-allocation-growing/2.6.7/index.html"
- "/docs/api-allocation-growing/2.7.6/index.html"
- "/docs/api-allocation-growing/2.8.6/index.html"
- "/docs/api-allocation-growing/2.9.5/index.html"
- "/docs/api-allocation-growing/2.10.5/index.html"
- "/docs/api-allocation-growing/2.11.4/index.html"
- "/docs/api-allocation-growing/2.12.5/index.html"
- "/docs/api-allocation-growing/2.13.7/index.html"
- "/docs/api-allocation-growing/2.14.6/index.html"
- "/docs/api-allocation-growing/2.15.4/index.html"
- "/docs/api-allocation-growing/2.16.6/index.html"
- "/docs/api-allocation-growing/2.17.0/index.html"
- "/docs/api-allocation-growing/2.17.1/index.html"
- "/docs/api-allocation-growing/2.17.2/index.html"
- "/docs/api-allocation-growing/2.17.3/index.html"
- "/docs/api-allocation-growing/2.17.4/index.html"
- "/docs/api-allocation-growing/2.17.5/index.html"
- "/docs/api-allocation-growing/2.17.6/index.html"
- "/docs/api-allocation-growing/2.18.0/index.html"
- "/docs/api-allocation-growing/2.18.1/index.html"
- "/docs/api-allocation-growing/2.18.2/index.html"
- "/docs/api-allocation-growing/2.18.3/index.html"
- "/docs/api-allocation-growing/2.18.4/index.html"
- "/docs/api-allocation-growing/2.18.5/index.html"
- "/docs/api-allocation-growing/2.19.0/index.html"
- "/docs/api-allocation-growing/2.19.1/index.html"
- "/docs/api-allocation-growing/2.19.2/index.html"
- "/docs/api-allocation-growing/2.19.3/index.html"
- "/docs/api-allocation-growing/2.19.4/index.html"
- "/docs/api-allocation-growing/2.19.5/index.html"
- "/docs/api-allocation-growing/2.19.6/index.html"
- "/docs/api-allocation-growing/2.20.0/index.html"
- "/docs/api-allocation-growing/2.20.1/index.html"
- "/docs/api-allocation-growing/2.20.2/index.html"
- "/docs/api-allocation-growing/2.20.3/index.html"
- "/docs/api-allocation-growing/2.20.4/index.html"
- "/docs/api-allocation-growing/2.20.5/index.html"
- "/docs/api-allocation-growing/2.21.0/index.html"
- "/docs/api-allocation-growing/2.21.1/index.html"
- "/docs/api-allocation-growing/2.21.2/index.html"
- "/docs/api-allocation-growing/2.21.3/index.html"
- "/docs/api-allocation-growing/2.21.4/index.html"
- "/docs/api-allocation-growing/2.22.0/index.html"
- "/docs/api-allocation-growing/2.22.1/index.html"
- "/docs/api-allocation-growing/2.22.2/index.html"
- "/docs/api-allocation-growing/2.22.3/index.html"
- "/docs/api-allocation-growing/2.22.4/index.html"
- "/docs/api-allocation-growing/2.22.5/index.html"
- "/docs/api-allocation-growing/2.23.0/index.html"
- "/docs/api-allocation-growing/2.23.1/index.html"
- "/docs/api-allocation-growing/2.23.2/index.html"
- "/docs/api-allocation-growing/2.23.3/index.html"
- "/docs/api-allocation-growing/2.23.4/index.html"
- "/docs/api-allocation-growing/2.24.0/index.html"
- "/docs/api-allocation-growing/2.24.1/index.html"
- "/docs/api-allocation-growing/2.24.2/index.html"
- "/docs/api-allocation-growing/2.24.3/index.html"
- "/docs/api-allocation-growing/2.24.4/index.html"
---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Dynamically growing an array using realloc() is error prone and boring.</p>
</div>
<div class="paragraph">
<p>Define your array with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a pointer (<span class='synopsis'><code>item</code></span>) that points at the array, initialized to <span class='synopsis'><code>NULL</code></span>
(although please name the variable based on its contents, not on its
type);</p>
</li>
<li>
<p>an integer variable (<span class='synopsis'><code>alloc</code></span>) that keeps track of how big the current
allocation is, initialized to <span class='synopsis'><code>0</code></span>;</p>
</li>
<li>
<p>another integer variable (<span class='synopsis'><code>nr</code></span>) to keep track of how many elements the
array currently has, initialized to <span class='synopsis'><code>0</code></span>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then before adding <span class='synopsis'><code>n</code><code>th</code> <code>element</code> <code>to</code> <code>the</code> <code>item,</code> <code>call</code> <code>ALLOC_GROW</code>(<code>item,</code> <code>n,</code>

<code>alloc</code>)</span>.  This ensures that the array can hold at least <span class='synopsis'><code>n</code></span> elements by
calling <span class='synopsis'><code>realloc</code>(<code>3</code>)</span> and adjusting <span class='synopsis'><code>alloc</code></span> variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sometype *item;
size_t nr;
size_t alloc

for (i = 0; i &lt; nr; i++)
	if (we like item[i] already)
		return;

/* we did not like any existing one, so add one */
ALLOC_GROW(item, nr + 1, alloc);
item[nr++] = value you like;</pre>
</div>
</div>
<div class="paragraph">
<p>You are responsible for updating the <span class='synopsis'><code>nr</code></span> variable.</p>
</div>
<div class="paragraph">
<p>If you need to specify the number of elements to allocate explicitly
then use the macro <span class='synopsis'><code>REALLOC_ARRAY</code>(<code>item,</code> <code>alloc</code>)</span> instead of <span class='synopsis'><code>ALLOC_GROW</code></span>.</p>
</div>
</div>
</div>