---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - api-path-walk Documentation
docname: api-path-walk
version: 2.49.0
aliases:
- "/docs/api-path-walk/2.49.0/index.html"
- "/docs/api-path-walk/2.50.0/index.html"
---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The path-walk API is used to walk reachable objects, but to visit objects
in batches based on a common path they appear in, or by type.</p>
</div>
<div class="paragraph">
<p>For example, all reachable commits are visited in a group. All tags are
visited in a group. Then, all root trees are visited. At some point, all
blobs reachable via a path <span class='synopsis'><code>my/dir/to/A</code></span> are visited. When there are
multiple paths possible to reach the same object, then only one of those
paths is used to visit the object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use the path-walk API, include <span class='synopsis'><code>path-walk.h</code></span> and call
<span class='synopsis'><code>walk_objects_by_path</code>()</span> with a customized <span class='synopsis'><code>path_walk_info</code></span> struct. The
struct is used to set all of the options for how the walk should proceed.
Let&#8217;s dig into the different options and their use.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-spanclasssynopsiscodepathfncodespanandspanclasssynopsiscodepathfndatacodespan"><a id="Documentation/technical/api-path-walk.txt-pathfnandpathfndata" class="anchor" href="#Documentation/technical/api-path-walk.txt-pathfnandpathfndata"></a><span class='synopsis'><code>path_fn</code></span> and <span class='synopsis'><code>path_fn_data</code></span> </dt>
<dd>
<p>The most important option is the <span class='synopsis'><code>path_fn</code></span> option, which is a
function pointer to the callback that can execute logic on the
object IDs for objects grouped by type and path. This function
also receives a <span class='synopsis'><code>data</code></span> value that corresponds to the
<span class='synopsis'><code>path_fn_data</code></span> member, for providing custom data structures to
this callback function.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-spanclasssynopsiscoderevscodespan"><a id="Documentation/technical/api-path-walk.txt-revs" class="anchor" href="#Documentation/technical/api-path-walk.txt-revs"></a><span class='synopsis'><code>revs</code></span> </dt>
<dd>
<p>To configure the exact details of the reachable set of objects,
use the <span class='synopsis'><code>revs</code></span> member and initialize it using the revision
machinery in <span class='synopsis'><code>revision.h</code></span>. Initialize <span class='synopsis'><code>revs</code></span> using calls such as
<span class='synopsis'><code>setup_revisions</code>()</span> or <span class='synopsis'><code>parse_revision_opt</code>()</span>. Do not call
<span class='synopsis'><code>prepare_revision_walk</code>()</span>, as that will be called within
<span class='synopsis'><code>walk_objects_by_path</code>()</span>.</p>
<div class="paragraph">
<p>It is also important that you do not specify the <span class='synopsis'><code>--objects</code></span> flag for the
<span class='synopsis'><code>revs</code></span> struct. The revision walk should only be used to walk commits, and
the objects will be walked in a separate way based on those starting
commits.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-spanclasssynopsiscodecommitscodespanspanclasssynopsiscodeblobscodespanspanclasssynopsiscodetreescodespanspanclasssynopsiscodetagscodespan"><a id="Documentation/technical/api-path-walk.txt-commitsblobstreestags" class="anchor" href="#Documentation/technical/api-path-walk.txt-commitsblobstreestags"></a><span class='synopsis'><code>commits</code></span>, <span class='synopsis'><code>blobs</code></span>, <span class='synopsis'><code>trees</code></span>, <span class='synopsis'><code>tags</code></span> </dt>
<dd>
<p>By default, these members are enabled and signal that the path-walk
API should call the <span class='synopsis'><code>path_fn</code></span> on objects of these types. Specialized
applications could disable some options to make it simpler to walk
the objects or to have fewer calls to <span class='synopsis'><code>path_fn</code></span>.</p>
<div class="paragraph">
<p>While it is possible to walk only commits in this way, consumers would be
better off using the revision walk API instead.</p>
</div>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-spanclasssynopsiscodeprunealluninterestingcodespan"><a id="Documentation/technical/api-path-walk.txt-prunealluninteresting" class="anchor" href="#Documentation/technical/api-path-walk.txt-prunealluninteresting"></a><span class='synopsis'><code>prune_all_uninteresting</code></span> </dt>
<dd>
<p>By default, all reachable paths are emitted by the path-walk API.
This option allows consumers to declare that they are not
interested in paths where all included objects are marked with the
<span class='synopsis'><code>UNINTERESTING</code></span> flag. This requires using the <span class='synopsis'><code>boundary</code></span> option in
the revision walk so that the walk emits commits marked with the
<span class='synopsis'><code>UNINTERESTING</code></span> flag.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-path-walk.txt-spanclasssynopsiscodeplcodespan"><a id="Documentation/technical/api-path-walk.txt-pl" class="anchor" href="#Documentation/technical/api-path-walk.txt-pl"></a><span class='synopsis'><code>pl</code></span> </dt>
<dd>
<p>This pattern list pointer allows focusing the path-walk search to
a set of patterns, only emitting paths that match the given
patterns. See <a href='{{< relurl "docs/gitignore" >}}'>gitignore[5]</a> or
<a href='{{< relurl "docs/git-sparse-checkout" >}}'>git-sparse-checkout[1]</a> for details about pattern lists.
When the pattern list uses cone-mode patterns, then the path-walk
API can prune the set of paths it walks to improve performance.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See example usages in:
	<span class='synopsis'><code>t/helper/test-path-walk.c</code></span>,
	<span class='synopsis'><code>builtin/backfill.c</code></span></p>
</div>
</div>
</div>