---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - api-parse-options Documentation
docname: api-parse-options
version: 2.6.7
aliases:
- "/docs/api-parse-options/2.6.7/index.html"
- "/docs/api-parse-options/2.7.6/index.html"
---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The parse-options API is used to parse and massage options in Git
and to provide a usage help with consistent look.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The argument vector <span class='synopsis'><code>argv</code>[]</span> may usually contain mandatory or optional
<em>non-option arguments</em>, e.g. a filename or a branch, and <em>options</em>.
Options are optional arguments that start with a dash and
that allow to change the behavior of a command.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are basically three types of options:
<em>boolean</em> options,
options with (mandatory) <em>arguments</em> and
options with <em>optional arguments</em>
(i.e. a boolean option that can be adjusted).</p>
</li>
<li>
<p>There are basically two forms of options:
<em>Short options</em> consist of one dash (<span class='synopsis'><code>-</code></span>) and one alphanumeric
character.
<em>Long options</em> begin with two dashes (<span class='synopsis'><code>--</code></span>) and some
alphanumeric characters.</p>
</li>
<li>
<p>Options are case-sensitive.
Please define <em>lower-case long options</em> only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The parse-options API allows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>stuck</em> and <em>separate form</em> of options with arguments.
<span class='synopsis'><code>-oArg</code></span> is stuck, <span class='synopsis'><code>-o</code> <code>Arg</code></span> is separate form.
<span class='synopsis'><code>--option=Arg</code></span> is stuck, <span class='synopsis'><code>--option</code> <code>Arg</code></span> is separate form.</p>
</li>
<li>
<p>Long options may be <em>abbreviated</em>, as long as the abbreviation
is unambiguous.</p>
</li>
<li>
<p>Short options may be bundled, e.g. <span class='synopsis'><code>-a</code> <code>-b</code></span> can be specified as <span class='synopsis'><code>-ab</code></span>.</p>
</li>
<li>
<p>Boolean long options can be <em>negated</em> (or <em>unset</em>) by prepending
<span class='synopsis'><code>no-</code></span>, e.g. <span class='synopsis'><code>--no-abbrev</code></span> instead of <span class='synopsis'><code>--abbrev</code></span>. Conversely,
options that begin with <span class='synopsis'><code>no-</code></span> can be <em>negated</em> by removing it.
Other long options can be unset (e.g., set string to NULL, set
integer to 0) by prepending <span class='synopsis'><code>no-</code></span>.</p>
</li>
<li>
<p>Options and non-option arguments can clearly be separated using the <span class='synopsis'><code>--</code></span>
option, e.g. <span class='synopsis'><code>-a</code> <code>-b</code> <code>--option</code> <code>--</code> <code>--this-is-a-file</code></span> indicates that
<span class='synopsis'><code>--this-is-a-file</code></span> must not be processed as an option.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_parse_options"><a class="anchor" href="#_steps_to_parse_options"></a>Steps to parse options</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><span class='synopsis'><code>#include</code> <code>"parse-options.h"</code></span></p>
</li>
<li>
<p>define a NULL-terminated
<span class='synopsis'><code>static</code> <code>const</code> <code>char</code> <code>*</code> <code>const</code> <code>builtin_foo_usage</code>[]</span> array
containing alternative usage strings</p>
</li>
<li>
<p>define <span class='synopsis'><code>builtin_foo_options</code></span> array as described below
in section <em>Data Structure</em>.</p>
</li>
<li>
<p>in <span class='synopsis'><code>cmd_foo</code>(<code>int</code> <code>argc,</code> <code>const</code> <code>char</code> <code>**argv,</code> <code>const</code> <code>char</code> <code>*prefix</code>)</span>
call</p>
<div class="literalblock">
<div class="content">
<pre>argc = parse_options(argc, argv, prefix, builtin_foo_options, builtin_foo_usage, flags);</pre>
</div>
</div>
<div class="paragraph">
<p><span class='synopsis'><code>parse_options</code>()</span> will filter out the processed options of <span class='synopsis'><code>argv</code>[]</span> and leave the
non-option arguments in <span class='synopsis'><code>argv</code>[]</span>.
<span class='synopsis'><code>argc</code></span> is updated appropriately because of the assignment.</p>
</div>
<div class="paragraph">
<p>You can also pass NULL instead of a usage array as the fifth parameter of
parse_options(), to avoid displaying a help screen with usage info and
option list.  This should only be done if necessary, e.g. to implement
a limited parser for only a subset of the options that needs to be run
before the full parser, which in turn shows the full help message.</p>
</div>
<div class="paragraph">
<p>Flags are the bitwise-or of:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodePARSEOPTKEEPDASHDASHcodespan"><a id="Documentation/technical/api-parse-options.txt-PARSEOPTKEEPDASHDASH" class="anchor" href="#Documentation/technical/api-parse-options.txt-PARSEOPTKEEPDASHDASH"></a><span class='synopsis'><code>PARSE_OPT_KEEP_DASHDASH</code></span> </dt>
<dd>
<p>Keep the <span class='synopsis'><code>--</code></span> that usually separates options from
non-option arguments.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodePARSEOPTSTOPATNONOPTIONcodespan"><a id="Documentation/technical/api-parse-options.txt-PARSEOPTSTOPATNONOPTION" class="anchor" href="#Documentation/technical/api-parse-options.txt-PARSEOPTSTOPATNONOPTION"></a><span class='synopsis'><code>PARSE_OPT_STOP_AT_NON_OPTION</code></span> </dt>
<dd>
<p>Usually the whole argument vector is massaged and reordered.
Using this flag, processing is stopped at the first non-option
argument.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodePARSEOPTKEEPARGV0codespan"><a id="Documentation/technical/api-parse-options.txt-PARSEOPTKEEPARGV0" class="anchor" href="#Documentation/technical/api-parse-options.txt-PARSEOPTKEEPARGV0"></a><span class='synopsis'><code>PARSE_OPT_KEEP_ARGV0</code></span> </dt>
<dd>
<p>Keep the first argument, which contains the program name.  It&#8217;s
removed from argv[] by default.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodePARSEOPTKEEPUNKNOWNcodespan"><a id="Documentation/technical/api-parse-options.txt-PARSEOPTKEEPUNKNOWN" class="anchor" href="#Documentation/technical/api-parse-options.txt-PARSEOPTKEEPUNKNOWN"></a><span class='synopsis'><code>PARSE_OPT_KEEP_UNKNOWN</code></span> </dt>
<dd>
<p>Keep unknown arguments instead of erroring out.  This doesn&#8217;t
work for all combinations of arguments as users might expect
it to do.  E.g. if the first argument in <span class='synopsis'><code>--unknown</code> <code>--known</code></span>
takes a value (which we can&#8217;t know), the second one is
mistakenly interpreted as a known option.  Similarly, if
<span class='synopsis'><code>PARSE_OPT_STOP_AT_NON_OPTION</code></span> is set, the second argument in
<span class='synopsis'><code>--unknown</code> <code>value</code></span> will be mistakenly interpreted as a
non-option, not as a value belonging to the unknown option,
the parser early.  That&#8217;s why parse_options() errors out if
both options are set.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodePARSEOPTNOINTERNALHELPcodespan"><a id="Documentation/technical/api-parse-options.txt-PARSEOPTNOINTERNALHELP" class="anchor" href="#Documentation/technical/api-parse-options.txt-PARSEOPTNOINTERNALHELP"></a><span class='synopsis'><code>PARSE_OPT_NO_INTERNAL_HELP</code></span> </dt>
<dd>
<p>By default, parse_options() handles <span class='synopsis'><code>-h</code></span>, <span class='synopsis'><code>--help</code></span> and
<span class='synopsis'><code>--help-all</code></span> internally, by showing a help screen.  This option
turns it off and allows one to add custom handlers for these
options, or to just leave them unknown.</p>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_structure"><a class="anchor" href="#_data_structure"></a>Data Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main data structure is an array of the <span class='synopsis'><code>option</code></span> struct,
say <span class='synopsis'><code>static</code> <code>struct</code> <code>option</code> <code>builtin_add_options</code>[]</span>.
There are some macros to easily define options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTABBREVampintvaremspan"><a id="Documentation/technical/api-parse-options.txt-OPTABBREVintvar" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTABBREVintvar"></a><span class='synopsis'><em>OPT__ABBREV(&amp;int_var)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>--abbrev</code>[<code>=</code><em>&lt;n&gt;</em>]</span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTCOLORampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTCOLORintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTCOLORintvardescription"></a><span class='synopsis'><em>OPT__COLOR(&amp;int_var, description)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>--color</code>[<code>=</code><em>&lt;when&gt;</em>]</span> and <span class='synopsis'><code>--no-color</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTDRYRUNampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTDRYRUNintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTDRYRUNintvardescription"></a><span class='synopsis'><em>OPT__DRY_RUN(&amp;int_var, description)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>-n,</code> <code>--dry-run</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTFORCEampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTFORCEintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTFORCEintvardescription"></a><span class='synopsis'><em>OPT__FORCE(&amp;int_var, description)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>-f,</code> <code>--force</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTQUIETampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTQUIETintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTQUIETintvardescription"></a><span class='synopsis'><em>OPT__QUIET(&amp;int_var, description)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>-q,</code> <code>--quiet</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTVERBOSEampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTVERBOSEintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTVERBOSEintvardescription"></a><span class='synopsis'><em>OPT__VERBOSE(&amp;int_var, description)</em></span> </dt>
<dd>
<p>Add <span class='synopsis'><code>-v,</code> <code>--verbose</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodeOPTGROUPcodecodedescriptioncodespan"><a id="Documentation/technical/api-parse-options.txt-OPTGROUPdescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTGROUPdescription"></a><span class='synopsis'><code>OPT_GROUP</code>(<code>description</code>)</span> </dt>
<dd>
<p>Start an option group. <span class='synopsis'><code>description</code></span> is a short string that
describes the group or an empty string.
Start the description with an upper-case letter.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTBOOLshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTBOOLshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTBOOLshortlongintvardescription"></a><span class='synopsis'><em>OPT_BOOL(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce a boolean option. <span class='synopsis'><code>int_var</code></span> is set to one with
<span class='synopsis'><code>--option</code></span> and set to zero with <span class='synopsis'><code>--no-option</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTCOUNTUPshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTCOUNTUPshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTCOUNTUPshortlongintvardescription"></a><span class='synopsis'><em>OPT_COUNTUP(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce a count-up option.
<span class='synopsis'><code>int_var</code></span> is incremented on each use of <span class='synopsis'><code>--option</code></span>, and
reset to zero with <span class='synopsis'><code>--no-option</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTBITshortlongampintvardescriptionmaskemspan"><a id="Documentation/technical/api-parse-options.txt-OPTBITshortlongintvardescriptionmask" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTBITshortlongintvardescriptionmask"></a><span class='synopsis'><em>OPT_BIT(short, long, &amp;int_var, description, mask)</em></span> </dt>
<dd>
<p>Introduce a boolean option.
If used, <span class='synopsis'><code>int_var</code></span> is bitwise-ored with <span class='synopsis'><code>mask</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTNEGBITshortlongampintvardescriptionmaskemspan"><a id="Documentation/technical/api-parse-options.txt-OPTNEGBITshortlongintvardescriptionmask" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTNEGBITshortlongintvardescriptionmask"></a><span class='synopsis'><em>OPT_NEGBIT(short, long, &amp;int_var, description, mask)</em></span> </dt>
<dd>
<p>Introduce a boolean option.
If used, <span class='synopsis'><code>int_var</code></span> is bitwise-anded with the inverted <span class='synopsis'><code>mask</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTSETINTshortlongampintvardescriptionintegeremspan"><a id="Documentation/technical/api-parse-options.txt-OPTSETINTshortlongintvardescriptioninteger" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTSETINTshortlongintvardescriptioninteger"></a><span class='synopsis'><em>OPT_SET_INT(short, long, &amp;int_var, description, integer)</em></span> </dt>
<dd>
<p>Introduce an integer option.
<span class='synopsis'><code>int_var</code></span> is set to <span class='synopsis'><code>integer</code></span> with <span class='synopsis'><code>--option</code></span>, and
reset to zero with <span class='synopsis'><code>--no-option</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTSTRINGshortlongampstrvarargstrdescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTSTRINGshortlongstrvarargstrdescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTSTRINGshortlongstrvarargstrdescription"></a><span class='synopsis'><em>OPT_STRING(short, long, &amp;str_var, arg_str, description)</em></span> </dt>
<dd>
<p>Introduce an option with string argument.
The string argument is put into <span class='synopsis'><code>str_var</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTINTEGERshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTINTEGERshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTINTEGERshortlongintvardescription"></a><span class='synopsis'><em>OPT_INTEGER(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce an option with integer argument.
The integer is put into <span class='synopsis'><code>int_var</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTMAGNITUDEshortlongampunsignedlongvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTMAGNITUDEshortlongunsignedlongvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTMAGNITUDEshortlongunsignedlongvardescription"></a><span class='synopsis'><em>OPT_MAGNITUDE(short, long, &amp;unsigned_long_var, description)</em></span> </dt>
<dd>
<p>Introduce an option with a size argument. The argument must be a
non-negative integer and may include a suffix of <em>k</em>, <em>m</em> or <em>g</em> to
scale the provided value by 1024, 1024^2 or 1024^3 respectively.
The scaled value is put into <span class='synopsis'><code>unsigned_long_var</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTDATEshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTDATEshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTDATEshortlongintvardescription"></a><span class='synopsis'><em>OPT_DATE(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce an option with date argument, see <span class='synopsis'><code>approxidate</code>()</span>.
The timestamp is put into <span class='synopsis'><code>int_var</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTEXPIRYDATEshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTEXPIRYDATEshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTEXPIRYDATEshortlongintvardescription"></a><span class='synopsis'><em>OPT_EXPIRY_DATE(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce an option with expiry date argument, see <span class='synopsis'><code>parse_expiry_date</code>()</span>.
The timestamp is put into <span class='synopsis'><code>int_var</code></span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTCALLBACKshortlongampvarargstrdescriptionfuncptremspan"><a id="Documentation/technical/api-parse-options.txt-OPTCALLBACKshortlongvarargstrdescriptionfuncptr" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTCALLBACKshortlongvarargstrdescriptionfuncptr"></a><span class='synopsis'><em>OPT_CALLBACK(short, long, &amp;var, arg_str, description, func_ptr)</em></span> </dt>
<dd>
<p>Introduce an option with argument.
The argument will be fed into the function given by <span class='synopsis'><code>func_ptr</code></span>
and the result will be put into <span class='synopsis'><code>var</code></span>.
See <em>Option Callbacks</em> below for a more elaborate description.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTFILENAMEshortlongampvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTFILENAMEshortlongvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTFILENAMEshortlongvardescription"></a><span class='synopsis'><em>OPT_FILENAME(short, long, &amp;var, description)</em></span> </dt>
<dd>
<p>Introduce an option with a filename argument.
The filename will be prefixed by passing the filename along with
the prefix argument of <span class='synopsis'><code>parse_options</code>()</span> to <span class='synopsis'><code>prefix_filename</code>()</span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodeOPTARGUMENTcodecodelongcodecodedescriptioncodespan"><a id="Documentation/technical/api-parse-options.txt-OPTARGUMENTlongdescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTARGUMENTlongdescription"></a><span class='synopsis'><code>OPT_ARGUMENT</code>(<code>long,</code> <code>description</code>)</span> </dt>
<dd>
<p>Introduce a long-option argument that will be kept in <span class='synopsis'><code>argv</code>[]</span>.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTNUMBERCALLBACKampvardescriptionfuncptremspan"><a id="Documentation/technical/api-parse-options.txt-OPTNUMBERCALLBACKvardescriptionfuncptr" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTNUMBERCALLBACKvardescriptionfuncptr"></a><span class='synopsis'><em>OPT_NUMBER_CALLBACK(&amp;var, description, func_ptr)</em></span> </dt>
<dd>
<p>Recognize numerical options like -123 and feed the integer as
if it was an argument to the function given by <span class='synopsis'><code>func_ptr</code></span>.
The result will be put into <span class='synopsis'><code>var</code></span>.  There can be only one such
option definition.  It cannot be negated and it takes no
arguments.  Short options that happen to be digits take
precedence over it.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTCOLORFLAGshortlongampintvardescriptionemspan"><a id="Documentation/technical/api-parse-options.txt-OPTCOLORFLAGshortlongintvardescription" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTCOLORFLAGshortlongintvardescription"></a><span class='synopsis'><em>OPT_COLOR_FLAG(short, long, &amp;int_var, description)</em></span> </dt>
<dd>
<p>Introduce an option that takes an optional argument that can
have one of three values: "always", "never", or "auto".  If the
argument is not given, it defaults to "always".  The <span class='synopsis'><code>--no-</code></span> form
works like <span class='synopsis'><code>--long=never</code></span>; it cannot take an argument.  If
"always", set <span class='synopsis'><code>int_var</code></span> to 1; if "never", set <span class='synopsis'><code>int_var</code></span> to 0; if
"auto", set <span class='synopsis'><code>int_var</code></span> to 1 if stdout is a tty or a pager,
0 otherwise.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsiscodeOPTNOOPNOARGcodecodeshortcodecodelongcodespan"><a id="Documentation/technical/api-parse-options.txt-OPTNOOPNOARGshortlong" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTNOOPNOARGshortlong"></a><span class='synopsis'><code>OPT_NOOP_NOARG</code>(<code>short,</code> <code>long</code>)</span> </dt>
<dd>
<p>Introduce an option that has no effect and takes no arguments.
Use it to hide deprecated options that are still to be recognized
and ignored silently.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTPASSTHRUshortlongampcharvarargstrdescriptionflagsemspan"><a id="Documentation/technical/api-parse-options.txt-OPTPASSTHRUshortlongcharvarargstrdescriptionflags" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTPASSTHRUshortlongcharvarargstrdescriptionflags"></a><span class='synopsis'><em>OPT_PASSTHRU(short, long, &amp;char_var, arg_str, description, flags)</em></span> </dt>
<dd>
<p>Introduce an option that will be reconstructed into a char* string,
which must be initialized to NULL. This is useful when you need to
pass the command-line option to another command. Any previous value
will be overwritten, so this should only be used for options where
the last one specified on the command line wins.</p>
</dd>
<dt class="hdlist1" id="Documentation/technical/api-parse-options.txt-spanclasssynopsisemOPTPASSTHRUARGVshortlongampargvarrayvarargstrdescriptionflagsemspan"><a id="Documentation/technical/api-parse-options.txt-OPTPASSTHRUARGVshortlongargvarrayvarargstrdescriptionflags" class="anchor" href="#Documentation/technical/api-parse-options.txt-OPTPASSTHRUARGVshortlongargvarrayvarargstrdescriptionflags"></a><span class='synopsis'><em>OPT_PASSTHRU_ARGV(short, long, &amp;argv_array_var, arg_str, description, flags)</em></span> </dt>
<dd>
<p>Introduce an option where all instances of it on the command-line will
be reconstructed into an argv_array. This is useful when you need to
pass the command-line option, which can be specified multiple times,
to another command.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The last element of the array must be <span class='synopsis'><code>OPT_END</code>()</span>.</p>
</div>
<div class="paragraph">
<p>If not stated otherwise, interpret the arguments as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class='synopsis'><code>short</code></span> is a character for the short option
(e.g. <span class='synopsis'><code>e'</code></span> for <span class='synopsis'><code>-e</code></span>, use <span class='synopsis'><code>0</code></span> to omit),</p>
</li>
<li>
<p><span class='synopsis'><code>long</code></span> is a string for the long option
(e.g. <span class='synopsis'><code>"example"</code></span> for <span class='synopsis'><code>--example</code></span>, use <span class='synopsis'><code>NULL</code></span> to omit),</p>
</li>
<li>
<p><span class='synopsis'><code>int_var</code></span> is an integer variable,</p>
</li>
<li>
<p><span class='synopsis'><code>str_var</code></span> is a string variable (<span class='synopsis'><code>char</code> <code>*</code></span>),</p>
</li>
<li>
<p><span class='synopsis'><code>arg_str</code></span> is the string that is shown as argument
(e.g. <span class='synopsis'><code>"branch"</code></span> will result in <span class='synopsis'><em>&lt;branch&gt;</em></span>).
If set to <span class='synopsis'><code>NULL</code></span>, three dots (<span class='synopsis'>...</span>) will be displayed.</p>
</li>
<li>
<p><span class='synopsis'><code>description</code></span> is a short string to describe the effect of the option.
It shall begin with a lower-case letter and a full stop (<span class='synopsis'><code>.</code></span>) shall be
omitted at the end.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_option_callbacks"><a class="anchor" href="#_option_callbacks"></a>Option Callbacks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The function must be defined in this form:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>int func(const struct option *opt, const char *arg, int unset)</pre>
</div>
</div>
<div class="paragraph">
<p>The callback mechanism is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inside <span class='synopsis'><code>func</code></span>, the only interesting member of the structure
given by <span class='synopsis'><code>opt</code></span> is the void pointer <span class='synopsis'><em>opt-&gt;value</em></span>.
<span class='synopsis'><em>*opt-&gt;value</em></span> will be the value that is saved into <span class='synopsis'><code>var</code></span>, if you
use <span class='synopsis'><code>OPT_CALLBACK</code>()</span>.
For example, do <span class='synopsis'><em>*(unsigned long *)opt-&gt;value = 42;</em></span> to get 42
into an <span class='synopsis'><code>unsigned</code> <code>long</code></span> variable.</p>
</li>
<li>
<p>Return value <span class='synopsis'><code>0</code></span> indicates success and non-zero return
value will invoke <span class='synopsis'><code>usage_with_options</code>()</span> and, thus, die.</p>
</li>
<li>
<p>If the user negates the option, <span class='synopsis'><code>arg</code></span> is <span class='synopsis'><code>NULL</code></span> and <span class='synopsis'><code>unset</code></span> is 1.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sophisticated_option_parsing"><a class="anchor" href="#_sophisticated_option_parsing"></a>Sophisticated option parsing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need, for example, option callbacks with optional arguments
or without arguments at all, or if you need other special cases,
that are not handled by the macros above, you need to specify the
members of the <span class='synopsis'><code>option</code></span> structure manually.</p>
</div>
<div class="paragraph">
<p>This is not covered in this document, but well documented
in <span class='synopsis'><code>parse-options.h</code></span> itself.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <span class='synopsis'><code>test-parse-options.c</code></span> and
<span class='synopsis'><code>builtin/add.c</code></span>,
<span class='synopsis'><code>builtin/clone.c</code></span>,
<span class='synopsis'><code>builtin/commit.c</code></span>,
<span class='synopsis'><code>builtin/fetch.c</code></span>,
<span class='synopsis'><code>builtin/fsck.c</code></span>,
<span class='synopsis'><code>builtin/rm.c</code></span>
for real-world examples.</p>
</div>
</div>
</div>